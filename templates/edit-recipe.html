<?php include 'includes/header.php'; ?>
<link rel="stylesheet" href="assets/css/edit-recipe.css">

<div class="edit-recipe-page">
    
    <div class="page-header">
        <h1 class="page-title">‚úèÔ∏è Edit Recipe</h1>
        <p class="page-subtitle">Update your recipe details</p>
    </div>
    
    <div class="recipe-form-container">
        
        <?php if (!empty($error)): ?>
            <div class="error-message">
                ‚ö†Ô∏è <?php echo htmlspecialchars($error); ?>
            </div>
        <?php endif; ?>
        
        <?php if (!empty($success)): ?>
            <div class="success-message">
                ‚úÖ <?php echo htmlspecialchars($success); ?>
            </div>
        <?php endif; ?>
        
        <form method="POST" action="edit-recipe.php?id=<?php echo $recipe_id; ?>" enctype="multipart/form-data">
            
            <!-- Basic Information -->
            <div class="form-section">
                <h2 class="section-title">Basic Information</h2>
                
                <div class="form-group">
                    <label for="title" class="form-label">Recipe Title <span class="required">*</span></label>
                    <input 
                        type="text" 
                        id="title" 
                        name="title" 
                        class="form-input"
                        placeholder="e.g., Chocolate Chip Cookies"
                        required
                        value="<?php echo htmlspecialchars($recipe['title']); ?>"
                    >
                </div>
                
                <div class="form-group">
                    <label for="description" class="form-label">Short Description</label>
                    <textarea 
                        id="description" 
                        name="description" 
                        class="form-textarea"
                        placeholder="Brief description of your recipe..."
                    ><?php echo isset($recipe['description']) ? htmlspecialchars($recipe['description']) : ''; ?></textarea>
                </div>
                
                <div class="form-group">
                    <label for="category" class="form-label">Category <span class="required">*</span></label>
                    <select id="category" name="category" class="form-select" required>
                        <option value="">Select a category</option>
                        <option value="Breakfast" <?php echo $recipe['category'] == 'Breakfast' ? 'selected' : ''; ?>>ü•û Breakfast</option>
                        <option value="Lunch" <?php echo $recipe['category'] == 'Lunch' ? 'selected' : ''; ?>>ü•ó Lunch</option>
                        <option value="Dinner" <?php echo $recipe['category'] == 'Dinner' ? 'selected' : ''; ?>>üçΩÔ∏è Dinner</option>
                        <option value="Dessert" <?php echo $recipe['category'] == 'Dessert' ? 'selected' : ''; ?>>üç∞ Dessert</option>
                        <option value="Snack" <?php echo $recipe['category'] == 'Snack' ? 'selected' : ''; ?>>üçø Snack</option>
                        <option value="Beverage" <?php echo $recipe['category'] == 'Beverage' ? 'selected' : ''; ?>>ü•§ Beverage</option>
                    </select>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="prep_time" class="form-label">Prep Time (mins)</label>
                        <input 
                            type="number" 
                            id="prep_time" 
                            name="prep_time" 
                            class="form-input"
                            placeholder="15"
                            min="0"
                            value="<?php echo isset($recipe['prep_time']) ? htmlspecialchars($recipe['prep_time']) : 0; ?>"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="cook_time" class="form-label">Cook Time (mins)</label>
                        <input 
                            type="number" 
                            id="cook_time" 
                            name="cook_time" 
                            class="form-input"
                            placeholder="30"
                            min="0"
                            value="<?php echo isset($recipe['cook_time']) ? htmlspecialchars($recipe['cook_time']) : 0; ?>"
                        >
                    </div>
                    
                    <div class="form-group">
                        <label for="servings" class="form-label">Servings</label>
                        <input 
                            type="number" 
                            id="servings" 
                            name="servings" 
                            class="form-input"
                            placeholder="4"
                            min="1"
                            value="<?php echo isset($recipe['servings']) ? htmlspecialchars($recipe['servings']) : 0; ?>"
                        >
                    </div>
                </div>
            </div>
            
            <!-- Recipe Details -->
            <div class="form-section">
                <h2 class="section-title">Recipe Details</h2>
                
                <div class="form-group">
                    <label for="ingredients" class="form-label">Ingredients <span class="required">*</span></label>
                    <textarea 
                        id="ingredients" 
                        name="ingredients" 
                        class="form-textarea"
                        placeholder="List each ingredient on a new line"
                        required
                        style="min-height: 150px;"
                    ><?php echo htmlspecialchars($recipe['ingredients']); ?></textarea>
                </div>
                
                <div class="form-group">
                    <label for="instructions" class="form-label">Instructions <span class="required">*</span></label>
                    <textarea 
                        id="instructions" 
                        name="instructions" 
                        class="form-textarea"
                        placeholder="Write step-by-step instructions"
                        required
                        style="min-height: 200px;"
                    ><?php echo htmlspecialchars($recipe['instructions']); ?></textarea>
                </div>
            </div>
            
            <!-- Recipe Image -->
            <div class="form-section">
                <h2 class="section-title">Recipe Image</h2>
                
                <?php if (isset($recipe['image']) && !empty($recipe['image'])): ?>
                    <div class="current-image">
                        <strong>Current Image:</strong>
                        <img src="<?php echo htmlspecialchars($recipe['image']); ?>" alt="Current recipe image">
                    </div>
                <?php endif; ?>
                
                <div class="form-group">
                    <label for="image" class="form-label">Update Image (Optional)</label>
                    <input 
                        type="file" 
                        id="image" 
                        name="image" 
                        class="form-input"
                        accept="image/*"
                    >
                    <small style="color: #6b7280; font-size: 13px; margin-top: 5px; display: block;">Leave empty to keep current image</small>
                </div>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn-submit">
                    ‚ú® Update Recipe
                </button>
                <a href="recipe-detail.php?id=<?php echo $recipe_id; ?>" class="btn-cancel">
                    ‚ùå Cancel
                </a>
            </div>
            
        </form>
        
    </div>
    
</div>

<?php include 'includes/footer.php'; ?>
